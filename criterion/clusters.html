<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Clusters</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    :root { color-scheme: light; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      margin: 0;
      padding: 24px;
      background: #fafafa;
      color: #222;
    }
    h2 { margin: 0 0 8px; }
    .meta { color: #666; font-size: 0.95rem; margin-bottom: 12px; }
    .controls { margin-bottom: 12px; }
    select {
      padding: 6px 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      background: #fff;
    }
    .layout {
      display: flex;
      gap: 16px;
      align-items: flex-start;
      flex-wrap: wrap;
    }
    svg { border: 1px solid #ddd; background: #fff; }
    .panel {
      width: 320px;
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 12px;
    }
    .panel h3 { margin: 0 0 6px; }
    .panel-meta { color: #666; font-size: 0.9rem; }
    ul { margin: 6px 0 0; padding-left: 18px; }
  </style>
</head>
<body>
  <h2>Clusters</h2>
  <div class="controls">
    <label for="cluster-select">Select cluster:</label>
    <select id="cluster-select"></select>
  </div>
  <div id="meta" class="meta" style="display:none;"></div>
  <div id="cluster-highlight" class="meta" style="display:none; max-width: 1100px; margin-bottom: 12px;"></div>

  <div class="layout">
    <svg id="network" width="800" height="520"></svg>
    <div class="panel">
      <h3 id="cluster-name">Cluster</h3>
      <div id="cluster-meta" class="panel-meta"></div>
      <p id="cluster-summary" style="display:none;"></p>
      <div><strong>Top directors</strong></div>
      <ul id="director-list"></ul>
      <div style="margin-top:8px;"><strong>Top actors</strong></div>
      <ul id="actor-list"></ul>
      <div style="margin-top:8px;"><strong>Top movies</strong></div>
      <ul id="movie-list"></ul>
    </div>
  </div>

  <div style="margin-top:16px;">
    <div id="histogram-legend" class="meta"></div>
    <svg id="histogram" width="1200" height="260"></svg>
  </div>

  <script>
    const networkSvg = d3.select("#network");
    const histogramSvg = d3.select("#histogram");
    const selectEl = document.getElementById("cluster-select");
    const metaEl = document.getElementById("meta");
    const nameEl = document.getElementById("cluster-name");
    const clusterMetaEl = document.getElementById("cluster-meta");
    const summaryEl = document.getElementById("cluster-summary");
    const highlightEl = document.getElementById("cluster-highlight");
    const directorList = document.getElementById("director-list");
    const actorList = document.getElementById("actor-list");
    const movieList = document.getElementById("movie-list");
    const histogramLegend = document.getElementById("histogram-legend");

    const width = 800;
    const height = 520;

    const regionBuckets = {
      "United States": "America",
      "USA": "America",
      "Canada": "America",
      "Mexico": "America",
      "France": "France",
      "Italy": "Italy",
      "Japan": "Japan",
      "India": "India",
      "United Kingdom": "UK",
      "England": "UK",
      "Scotland": "UK",
      "Ireland": "UK",
      "Germany": "Germany",
      "Soviet Union": "Eastern Europe",
      "Russia": "Eastern Europe",
      "Czechoslovakia": "Eastern Europe",
      "Poland": "Eastern Europe",
      "Hungary": "Eastern Europe",
      "Romania": "Eastern Europe",
      "Bulgaria": "Eastern Europe",
      "China": "Asia",
      "South Korea": "Asia",
      "Korea": "Asia",
      "Taiwan": "Asia",
      "Hong Kong": "Asia",
      "Iran": "Middle East",
      "Turkey": "Middle East",
      "Israel": "Middle East",
      "Senegal": "Africa",
      "Algeria": "Africa",
      "Morocco": "Africa",
      "Tunisia": "Africa",
      "Portugal": "Iberia",
      "Spain": "Iberia",
      "Brazil": "Latin America",
      "Argentina": "Latin America",
      "Chile": "Latin America",
      "Australia": "Oceania",
      "New Zealand": "Oceania"
    };

    const regionColors = d3.scaleOrdinal()
      .domain([
        "America", "France", "Italy", "Japan", "India", "UK", "Germany",
        "Eastern Europe", "Asia", "Middle East", "Africa", "Iberia", "Latin America", "Oceania", "Other"
      ])
      .range([
        "#4C78A8", "#F58518", "#54A24B", "#E45756", "#72B7B2", "#B279A2", "#FF9DA6",
        "#9D755D", "#BAB0AC", "#EDC949", "#59A14F", "#8CD17D", "#FFBF79", "#B07AA1", "#A0A0A0"
      ]);

    function bucketCountry(country) {
      if (!country) return "Other";
      const norm = country.replace(/,.*$/, "").trim();
      return regionBuckets[norm] || "Other";
    }

    function binYear(year) {
      if (!Number.isFinite(year)) return null;
      const start = Math.floor((year - 1920) / 5) * 5 + 1920;
      return `${start}-${start + 5}`;
    }

    function renderNetwork(cluster) {
      networkSvg.selectAll("*").remove();
      const nodes = cluster.nodes.map(d => ({...d}));
      const links = cluster.links.map(d => ({...d}));

      const link = networkSvg.append("g")
        .selectAll("line")
        .data(links)
        .join("line")
        .attr("stroke", "#bbb")
        .attr("stroke-opacity", 0.3);

      const node = networkSvg.append("g")
        .selectAll("circle")
        .data(nodes)
        .join("circle")
        .attr("r", 3)
        .attr("fill", d => regionColors(bucketCountry(d.country)))
        .append("title")
        .text(d => d.title);

      const simulation = d3.forceSimulation(nodes)
        .force("link", d3.forceLink(links).id(d => d.id).distance(25).strength(0.2))
        .force("charge", d3.forceManyBody().strength(-25))
        .force("center", d3.forceCenter(width / 2, height / 2))
        .force("collide", d3.forceCollide(4));

      simulation.on("tick", () => {
        link
          .attr("x1", d => d.source.x)
          .attr("y1", d => d.source.y)
          .attr("x2", d => d.target.x)
          .attr("y2", d => d.target.y);

        networkSvg.selectAll("circle")
          .attr("cx", d => d.x)
          .attr("cy", d => d.y);
      });
    }

    function renderHistogram(cluster) {
      histogramSvg.selectAll("*").remove();
      const margin = { top: 20, right: 20, bottom: 30, left: 50 };
      const w = 1200 - margin.left - margin.right;
      const h = 260 - margin.top - margin.bottom;

      const svg = histogramSvg.append("g").attr("transform", `translate(${margin.left},${margin.top})`);

      const rows = cluster.nodes.map(n => ({
        yearBin: binYear(n.year),
        region: bucketCountry(n.country)
      })).filter(d => d.yearBin);

      const bins = Array.from(new Set(rows.map(d => d.yearBin))).sort((a, b) => parseInt(a) - parseInt(b));
      const regions = Array.from(new Set(rows.map(d => d.region)));

      const stacked = d3.rollup(rows, v => v.length, d => d.yearBin, d => d.region);
      const data = bins.map(bin => {
        const entry = { bin };
        regions.forEach(r => { entry[r] = stacked.get(bin)?.get(r) || 0; });
        return entry;
      });

      const stack = d3.stack().keys(regions);
      const series = stack(data);

      const x = d3.scaleBand().domain(bins).range([0, w]).padding(0.1);
      const y = d3.scaleLinear()
        .domain([0, d3.max(series, s => d3.max(s, d => d[1])) || 1])
        .nice()
        .range([h, 0]);

      svg.append("g").selectAll("g")
        .data(series)
        .join("g")
        .attr("fill", d => regionColors(d.key))
        .selectAll("rect")
        .data(d => d)
        .join("rect")
        .attr("x", d => x(d.data.bin))
        .attr("y", d => y(d[1]))
        .attr("height", d => y(d[0]) - y(d[1]))
        .attr("width", x.bandwidth());

      svg.append("g").attr("transform", `translate(0,${h})`).call(d3.axisBottom(x).tickValues(bins.filter((_, i) => i % 2 === 0)));
      svg.append("g").call(d3.axisLeft(y));

      histogramLegend.innerHTML = regions.map(r => (
        `<span style="display:inline-flex;align-items:center;gap:6px;margin-right:12px;margin-bottom:6px;">
          <span style="width:10px;height:10px;display:inline-block;background:${regionColors(r)};border:1px solid #ccc;border-radius:2px;"></span>${r}
        </span>`
      )).join("");
    }

    fetch("cluster_details.json?v=7")
      .then(res => res.json())
      .then(data => {
        const entries = Object.values(data).sort((a, b) => b.summary.size - a.summary.size);
        entries.forEach(entry => {
          const option = document.createElement("option");
          option.value = entry.summary.id;
          option.textContent = entry.summary.name;
          selectEl.appendChild(option);
        });

        function update() {
          const id = selectEl.value;
          const cluster = data[id];
          if (!cluster) return;

          if (cluster.summary.name === "The American New Hollywood Lineage") {
            highlightEl.style.display = "block";
            highlightEl.innerHTML = "This body of work traces the arc from the late-1960s collapse of the classical studio system through decades of director-driven filmmaking that privileges psychological realism, moral ambiguity, and stylistic individuality. Films such as Easy Rider, Five Easy Pieces, Raging Bull, Do the Right Thing, No Country for Old Men, and Killers of the Flower Moon illustrate a continuous commitment to authorship over formula.<br><br>Thematically, these films interrogate the American Dream rather than affirm it. Protagonists are often antiheroes, drifters, outsiders, or morally compromised strivers navigating fractured social landscapes. Institutions\u2014media, corporations, law enforcement, religion, capitalism itself\u2014are frequently portrayed as corrupt, hollow, or indifferent. Identity is unstable, relationships are strained, and success often carries ethical cost. Violence and ambition are treated not as spectacle alone but as symptoms of deeper social anxiety.<br><br>Motifs of open highways, decaying small towns, neon-lit cities, strained domestic interiors, and moments of awkward silence recur across decades. Conversations linger in restaurants and living rooms; characters watch one another with suspicion or longing. Isolation persists even within crowded environments. Memory and regret haunt narratives, and endings frequently resist clean resolution.<br><br>Artistically, the style privileges realism but allows for strong authorial signatures. Location shooting, naturalistic performances, and deliberate pacing create emotional texture. At the same time, bold formal experimentation\u2014elliptical editing, surreal imagery, genre subversion\u2014emerges as a way to externalize psychological states. Crime films become meditations on fate; comedies turn quietly melancholic; historical epics feel intimate and morally uneasy. Even when budgets expand, the perspective remains character-centered rather than spectacle-driven.<br><br>Ultimately, this tradition represents a sustained rethinking of American identity through cinema. It is skeptical, introspective, and stylistically distinctive, unified less by genre than by a shared commitment to personal vision and moral complexity.";
          } else if (cluster.summary.name === "The Classical Hollywood Mythos") {
            highlightEl.style.display = "block";
            highlightEl.innerHTML = "This tradition represents the era when American cinema perfected its narrative grammar and built the foundational myths of national identity. At its heart lies a confidence in storytelling clarity: tightly structured plots, strong character arcs, crisp dialogue, and a visual style designed for emotional legibility. The world on screen feels ordered, even when the subject matter turns dark.<br><br>Thematically, these films revolve around ambition, romance, power, social mobility, and moral testing. Early works often highlight resilience and charm in the face of hardship, celebrating wit, determination, and upward striving. As the decades progress, a shadow creeps in. Stories of crime, betrayal, and corruption begin to dominate, exposing the fragility beneath success and respectability. The American Dream remains central, but it becomes complicated by greed, paranoia, and institutional failure. Characters increasingly confront systems\u2014courts, corporations, governments\u2014that shape or entrap them.<br><br>Recurring motifs deepen this tension. Urban nightscapes glow with harsh contrasts of light and shadow. Courtrooms and newsrooms become battlegrounds for truth and influence. Romantic relationships carry undertones of manipulation or sacrifice. Western frontiers shift from heroic landscapes to morally ambiguous terrains. The figure of the morally compromised protagonist\u2014ambitious, flawed, sometimes doomed\u2014emerges as a defining presence.<br><br>Artistically, the style balances discipline with expressive flourish. Continuity editing ensures narrative flow, while cinematography\u2014especially in darker dramas\u2014uses shadow and composition to externalize psychological strain. Dialogue-driven scenes emphasize performance and star presence. Even within formal constraints, visual boldness appears in innovative camera angles, deep focus, and stylized lighting, signaling subtle experimentation beneath the surface polish.<br><br>Ultimately, this canon captures a formative period in American filmmaking: confident in its craft, invested in myth-making, yet increasingly aware of the moral cracks beneath its own narratives.";
          } else if (cluster.summary.name === "The French New Wave and the Cinema of Modernity") {
            highlightEl.style.display = "block";
            highlightEl.innerHTML = "Although centered on the explosive creative moment of the 1960s, this body of work stretches both backward and forward, forming a sustained meditation on modern life, subjectivity, and the instability of meaning. Films such as Breathless, The 400 Blows, Cl\u00e9o from 5 to 7, and Pierrot le fou anchor the movement, while later works continue its philosophical and stylistic evolution.<br><br>At its core, this cinema is preoccupied with modern alienation and the fragmentation of identity. Love is restless and unstable, politics intrudes on intimacy, and characters often drift through cities searching for authenticity or transcendence. Youth culture, existential doubt, memory, desire, and the tension between freedom and responsibility recur constantly. The individual is rarely secure; instead, they are suspended between impulse and reflection, between action and self-consciousness.<br><br>Motifs frequently include wandering through urban spaces, lovers in conversation, mirrors and acts of looking, abrupt departures, and sudden ruptures in tone. Cinema itself becomes a subject\u2014films reference other films, acknowledge their own construction, and blur the line between fiction and reality. The city, especially Paris, is not just a backdrop but a living intellectual and emotional environment.<br><br>Artistically, the style rejects polished studio convention in favor of experimentation. Handheld camerawork, jump cuts, natural light, location shooting, improvisatory performances, and fragmented narrative structures define the aesthetic. Editing can feel abrupt or disjunctive; chronology may dissolve; dialogue can sound spontaneous rather than scripted. Color, when used, is often bold and expressive rather than naturalistic. The result is a cinema that feels immediate, intellectual, and self-aware.<br><br>Ultimately, this tradition represents film as philosophical inquiry. It is less concerned with resolving plot than with exploring consciousness, politics, desire, and the act of filmmaking itself. It captures a moment when cinema became modern\u2014restless, reflective, and radically personal.";
          } else if (cluster.summary.name === "Postwar Japanese Cinema and the Poetics of Impermanence") {
            highlightEl.style.display = "block";
            highlightEl.innerHTML = "This body of work traces the evolution of Japanese filmmaking from prewar studio classicism through the explosive creativity of the 1950s and 1960s and into later modernist and genre transformations. It moves fluidly between intimate domestic drama, samurai epics, crime films, avant-garde experiments, and even monster cinema, yet beneath that variety lies a remarkably coherent philosophical sensibility.<br><br>At its core, this cinema is preoccupied with impermanence, social obligation, and the tension between individual desire and collective expectation. Family structures, generational divides, postwar dislocation, and the erosion of tradition recur constantly. Parents and children misunderstand one another; loyalty collides with personal freedom; honor, shame, and duty shape lives in quiet but devastating ways. Even in crime films or historical epics, characters are often trapped within rigid social systems that leave little room for self-determination.<br><br>Motifs of transience and isolation run throughout. Seasonal change, empty corridors, drifting figures, ritualized gestures, and moments of stillness punctuate the narratives. Landscapes\u2014whether rural villages, crowded cities, windswept plains, or devastated battlefields\u2014carry emotional weight equal to that of the characters. Silence is frequently as expressive as dialogue. Death and memory linger close to the surface, not always as tragedy but as inevitability.<br><br>Artistically, the tradition balances formal discipline with daring experimentation. Earlier works often employ restrained compositions, low camera placements, and carefully structured framing that emphasize social order and emotional containment. As the 1960s unfold, style becomes more radical: fragmented editing, disorienting perspectives, stylized violence, surreal imagery, and psychological abstraction challenge classical narrative stability. Genre cinema\u2014samurai films, yakuza thrillers, kaiju spectacles\u2014absorbs this experimentation, transforming popular forms into vehicles for existential inquiry and social critique.<br><br>Across decades, the tone shifts from quiet humanism to modernist rupture and back again, yet the underlying sensibility remains contemplative. These films do not simply tell stories; they meditate on time, duty, identity, and the fragile space between personal longing and social reality. Ultimately, this canon presents cinema as both moral reflection and aesthetic discipline, shaped by history yet intensely attuned to the inner lives of its characters.";
          } else if (cluster.summary.name === "Swedish Existential Cinema") {
            highlightEl.style.display = "block";
            highlightEl.innerHTML = "This body of work is defined by its intense inward gaze. Rather than foregrounding spectacle or plot-driven momentum, it turns almost obsessively toward the inner life\u2014toward faith, doubt, memory, sexuality, guilt, and the fragile architecture of relationships. From early masterpieces like The Phantom Carriage to mid-century landmarks such as The Seventh Seal and Wild Strawberries, and later psychological dissections like Persona and Cries and Whispers, the throughline is a relentless confrontation with the human condition.<br><br>Thematically, these films circle around spiritual anxiety and emotional exposure. Questions of God\u2019s silence, the inevitability of death, the breakdown of communication, and the burdens of intimacy recur with striking regularity. Marriage is not romantic fantasy but a site of psychological tension. Love becomes intertwined with resentment, dependency, or existential loneliness. Characters search for transcendence but often encounter only ambiguity.<br><br>Motifs of isolation and confrontation dominate the imagery. Faces are studied in close-up as if landscapes of their own. Interiors feel stark and confining; silence stretches between lines of dialogue; natural settings\u2014bleak coastlines, forests, barren fields\u2014mirror inner desolation. Death appears not as spectacle but as presence, sometimes literal, sometimes symbolic. The passage of time weighs heavily, especially in stories of aging and memory.<br><br>Artistically, the style is disciplined yet daring. The cinematography often emphasizes high-contrast lighting and stark compositions, sculpting faces and bodies against minimal backgrounds. Dialogue can be theatrical in intensity, but performances remain psychologically raw. As the movement evolves, narrative structure becomes more fragmented and self-reflexive, blurring identity and dissolving clear boundaries between dream and reality. Formal experimentation emerges not for stylistic flourish but as a means of probing consciousness itself.<br><br>Ultimately, this tradition presents cinema as philosophical inquiry and emotional excavation. It is austere, intimate, and uncompromising, using the medium not to reassure but to interrogate existence, faith, and the fragile bonds that connect people to one another.";
          } else if (cluster.summary.name === "New German Cinema and the Politics of Alienation") {
            highlightEl.style.display = "block";
            highlightEl.innerHTML = "This body of work emerges from postwar Germany\u2019s attempt to confront its fractured identity and historical trauma. Though spanning from the mid-1960s through the early 1980s, the films are united by a stark moral seriousness and a distrust of inherited myths. Works such as Young T\u00f6rless, Ali: Fear Eats the Soul, The Marriage of Maria Braun, and The Tin Drum crystallize a cinema that views modern German society as suspended between repression and reckoning.<br><br>Thematically, these films grapple with guilt, conformity, authoritarian residue, economic recovery, and the uneasy seduction of consumer modernity. Characters often appear emotionally estranged, unable to connect authentically within social systems shaped by unresolved history. Love stories unfold as studies in power imbalance or social exclusion. Ambition and survival are tinged with compromise. The past\u2014whether explicitly referenced or silently implied\u2014haunts the present.<br><br>Motifs of isolation and entrapment recur with striking regularity. Figures move through sterile interiors, desolate urban spaces, highways, or provincial towns that seem drained of vitality. Institutions loom in the background: schools, bureaucracies, media, economic structures. Social rituals feel hollow or mechanical. Even intimacy becomes transactional or performative. Silence, awkward pauses, and rigid framing intensify the sense of emotional containment.<br><br>Artistically, the style is deliberately austere. Compositions can be static and theatrical, emphasizing distance between characters. Color palettes often oscillate between muted realism and stylized artificiality, underscoring emotional dislocation. Performances are controlled, sometimes deliberately flat, as if resisting melodrama. Narrative pacing is measured, occasionally abrupt, refusing conventional catharsis. This restraint is not emptiness but critique\u2014a way of exposing the structures beneath everyday life.<br><br>Ultimately, this tradition uses cinema as a tool of historical confrontation. It interrogates national identity not through spectacle but through intimate, often uncomfortable observation. The result is a body of work that is politically conscious, emotionally rigorous, and deeply skeptical of easy redemption.";
          } else if (cluster.summary.name === "French Poetic Realism and the Cinema of Fatalism") {
            highlightEl.style.display = "block";
            highlightEl.innerHTML = "This body of work captures French cinema at a moment when romantic lyricism and social melancholy fused into something unmistakably atmospheric. From early masterworks like The Passion of Joan of Arc to poetic realist landmarks such as Port of Shadows and Le jour se l\u00e8ve, and later wartime and postwar reflections like Children of Paradise and The Earrings of Madame de..., the unifying sensibility is one of beauty shadowed by inevitability.<br><br>Thematically, these films dwell on doomed love, social constraint, longing, betrayal, and the quiet tragedy of ordinary lives. Characters often belong to the margins\u2014workers, criminals, performers, dreamers\u2014whose desires collide with rigid social hierarchies or inescapable fate. Even when romance blossoms, it carries the weight of impermanence. Honor, jealousy, sacrifice, and disillusionment thread through intimate relationships, suggesting that personal happiness is fragile within larger social currents.<br><br>Motifs of foggy docks, cramped apartments, theatrical stages, mirrors, and fleeting encounters recur across the films. The city feels at once intimate and isolating. Shadows stretch across interiors, framing lovers and outcasts in visual melancholy. Performance itself\u2014whether literal theater or social masquerade\u2014often becomes central, reinforcing the tension between appearance and emotional truth. Memory and regret linger, and endings frequently lean toward inevitability rather than triumph.<br><br>Artistically, the style blends realism with heightened lyricism. Carefully composed frames, expressive lighting, and textured set design create a dreamlike atmosphere without abandoning social detail. Dialogue can be poetic yet grounded, and performances emphasize emotional vulnerability rather than spectacle. Even fantasy-inflected works maintain an undercurrent of introspection, using stylization to deepen rather than escape reality.<br><br>Ultimately, this tradition presents cinema as a lyrical meditation on fate and desire. It is romantic but rarely naive, visually lush yet emotionally restrained, committed to capturing the tenderness and sorrow embedded in everyday human experience.";
          } else if (cluster.summary.name === "Hong Kong Heroic Modernism") {
            highlightEl.style.display = "block";
            highlightEl.innerHTML = "This body of work captures Hong Kong cinema at its most kinetic and emotionally heightened, spanning martial arts spectacle, crime thrillers, romantic melancholy, and stylized action epics. From the explosive physicality of The Big Boss and Police Story to the balletic gunplay of The Killer and Hard Boiled, and the aching romanticism of Chungking Express and In the Mood for Love, the unifying force is intensity\u2014of motion, emotion, and style.<br><br>Thematically, these films revolve around loyalty, brotherhood, betrayal, exile, and the search for identity in a rapidly changing city. Honor codes structure relationships, whether among martial artists, police officers, gangsters, or lovers. Friendship often borders on tragic devotion. Characters operate within tightly bound social worlds\u2014criminal syndicates, law enforcement, underground networks\u2014where trust is fragile and fate turns suddenly violent. At the same time, romantic longing and nostalgia pulse beneath the action, suggesting a deeper anxiety about time, memory, and displacement.<br><br>Motifs of rain-soaked streets, neon-lit nights, crowded markets, rooftop confrontations, and confined urban interiors recur constantly. Guns and fists become extensions of moral conviction. Slow motion, mirrored standoffs, and choreographed violence transform combat into emotional expression. In quieter works, narrow hallways, passing glances, and recurring musical cues evoke yearning and missed connection. The city itself feels alive\u2014dense, transient, and suspended between past and future.<br><br>Artistically, the style is bold and kinetic. Action sequences emphasize practical stunts, long takes, and intricate choreography, creating visceral immediacy. Editing can be rapid and rhythmic, yet moments of stillness are equally deliberate. Color and lighting\u2014especially saturated reds, greens, and yellows\u2014shape mood as much as dialogue. Even crime narratives are infused with operatic emotion, elevating genre material into stylized moral drama. Later films deepen the introspective dimension, slowing the pace and fragmenting time to capture memory and desire.<br><br>Ultimately, this tradition fuses popular genre energy with auteur-driven visual poetry. It is cinema of momentum and melancholy at once\u2014where physical action becomes a language of honor, loss, and longing, and where the city\u2019s pulse mirrors the emotional turbulence of its characters.";
          } else if (cluster.summary.name === "Mexican Surrealism and the Cinema of Moral Rupture") {
            highlightEl.style.display = "block";
            highlightEl.innerHTML = "This body of work blends social realism with biting satire, psychological intensity, and a persistent strain of the surreal. From the subversive provocations of The Exterminating Angel and \u00c9l to the gothic unease of Cronos and the fractured urban tapestry of Amores perros, the unifying force is a fascination with moral instability beneath everyday life.<br><br>Thematically, these films explore obsession, hypocrisy, class division, desire, religious tension, and the volatility of human impulse. Bourgeois respectability is frequently exposed as fragile or absurd. Passion curdles into jealousy; faith becomes fanaticism; social rituals conceal cruelty or indifference. Violence\u2014whether psychological or physical\u2014erupts not as spectacle alone but as revelation, stripping away pretense and revealing hidden drives. Love stories often unfold against stark socioeconomic contrasts, underscoring the unequal structures that shape intimacy and opportunity.<br><br>Recurring motifs include enclosed spaces that feel increasingly oppressive, sudden tonal shifts from realism to absurdity, and characters trapped by their own compulsions. Urban landscapes appear chaotic and unpredictable, while domestic interiors become sites of paranoia or breakdown. Religious imagery and references to mortality hover in the background, reinforcing the tension between spiritual aspiration and earthly desire.<br><br>Artistically, the style oscillates between stark realism and stylized exaggeration. Performances can feel heightened, almost theatrical, yet grounded in psychological truth. Visual composition often emphasizes contrast\u2014light and shadow, beauty and decay, elegance and grotesque detail. Narrative structures may fragment, interweaving multiple perspectives or allowing surreal logic to intrude upon naturalistic settings. Humor, when present, is dark and unsettling rather than comforting.<br><br>Ultimately, this tradition presents Mexican cinema as both critique and provocation. It refuses stability\u2014moral, social, or narrative\u2014and instead exposes the fissures beneath authority, class, and desire. The result is a cinema that is daring, ironic, and emotionally volatile, where reality and absurdity coexist to reveal the deeper contradictions of modern life.";
          } else if (cluster.summary.name === "The Czechoslovak New Wave and the Cinema of Subversive Absurdity") {
            highlightEl.style.display = "block";
            highlightEl.innerHTML = "This body of work emerges from a brief but extraordinary moment of artistic freedom in the 1960s, blending political critique with playful experimentation. Films such as Loves of a Blonde, Closely Watched Trains, Daisies, and The Cremator reveal a cinema that resists authority not through overt slogans but through irony, satire, and formal disruption.<br><br>Thematically, these films explore conformity, bureaucratic absurdity, generational frustration, erotic awakening, and the quiet suffocation of life under ideological systems. Authority figures often appear ridiculous or hollow. Ordinary people drift through institutions that seem arbitrary or oppressive. Humor becomes a survival strategy, and rebellion frequently takes the form of playful chaos rather than direct confrontation. Beneath the comedy lies unease\u2014about complicity, moral compromise, and the ease with which individuals can be absorbed into dehumanizing structures.<br><br>Motifs of ritual, repetition, staged social events, and sudden tonal shifts recur throughout. Banquets, ceremonies, official gatherings, and public performances become arenas for exposing hypocrisy. The everyday is slightly distorted, as if reality itself has tilted. Youthful protagonists experiment with identity, sometimes destructively, while older characters cling to hollow respectability. Surreal or fantastical imagery often intrudes upon mundane settings, blurring innocence and menace.<br><br>Artistically, the style is inventive and irreverent. Nonlinear narratives, abrupt editing, documentary textures, and self-conscious theatricality disrupt classical storytelling. Performances can feel understated and naturalistic in one moment, exaggerated or grotesque in the next. Visual composition ranges from stark realism to whimsical stylization, often within the same film. Tone is unstable by design, shifting between farce and tragedy to undermine certainty.<br><br>Ultimately, this tradition presents cinema as both playful experiment and political allegory. It masks critique in humor and absurdity, exposing the fragility of authority and the contradictions of social life. The result is a body of work that feels light on the surface yet sharply incisive underneath\u2014witty, subversive, and quietly radical.";
          } else if (cluster.summary.name === "Soviet Poetic Cinema and the Metaphysics of Suffering") {
            highlightEl.style.display = "block";
            highlightEl.innerHTML = "This body of work transforms historical trauma and philosophical inquiry into intensely lyrical cinema. From the wartime immediacy of The Cranes Are Flying and Ballad of a Soldier to the spiritual and historical epic of Andrei Rublev and the metaphysical landscapes of Stalker and Solaris, the unifying force is a deep engagement with memory, sacrifice, faith, and moral endurance.<br><br>Thematically, these films grapple with war, spiritual crisis, artistic responsibility, and the search for meaning under immense historical pressure. Individuals are tested by forces larger than themselves\u2014war, ideology, nature, time. Suffering is not merely depicted but contemplated. Questions of belief, redemption, and human dignity surface repeatedly, often without clear answers. The past lingers insistently, shaping identity and conscience. Even in narratives set beyond Earth or outside conventional realism, the emotional core remains grounded in human vulnerability.<br><br>Motifs of ruined landscapes, flowing water, fire, long walks through desolate terrain, and silent contemplation recur throughout. Nature often mirrors inner turmoil. Characters move through vast spaces that dwarf them, emphasizing existential smallness against cosmic or historical scale. Memory intrudes through dreams, nonlinear flashbacks, and poetic imagery, dissolving boundaries between present and past.<br><br>Artistically, the style is deliberate and meditative. Long takes, slow pacing, and carefully composed frames create a contemplative rhythm. Dialogue is sparse, often secondary to image and atmosphere. Visual symbolism carries philosophical weight, and sound design\u2014wind, distant echoes, ambient noise\u2014heightens immersion. Narrative clarity may give way to abstraction, inviting reflection rather than explanation.<br><br>Ultimately, this tradition approaches cinema as spiritual meditation. It is austere yet emotionally profound, grounded in history yet reaching toward metaphysical inquiry. Through poetic imagery and restrained storytelling, it confronts suffering not as spectacle but as a path toward moral and existential understanding.";
          } else {
            highlightEl.style.display = "none";
            highlightEl.textContent = "";
          }

          nameEl.textContent = cluster.summary.name;
          clusterMetaEl.textContent = `Cluster ${cluster.summary.id} • ${cluster.summary.size} movies • avg year ${cluster.summary.avg_year || "N/A"} • ${cluster.summary.dominant_country}`;
          summaryEl.textContent = cluster.summary.summary;

          directorList.innerHTML = "";
          cluster.top_directors.forEach(([name, count]) => {
            const li = document.createElement("li");
            li.textContent = `${name} (${count})`;
            directorList.appendChild(li);
          });

          actorList.innerHTML = "";
          cluster.top_actors.forEach(([name, count]) => {
            const li = document.createElement("li");
            li.textContent = `${name} (${count})`;
            actorList.appendChild(li);
          });

          movieList.innerHTML = "";
          cluster.summary.top_movies.forEach(movie => {
            const li = document.createElement("li");
            const year = movie.year ? ` (${movie.year})` : "";
            li.textContent = `${movie.title}${year}`;
            movieList.appendChild(li);
          });

          renderNetwork(cluster);
          renderHistogram(cluster);
        }

        selectEl.addEventListener("change", update);
        selectEl.value = entries[0]?.summary.id;
        update();

        metaEl.textContent = `Clusters: ${entries.length}`;
      })
      .catch(err => {
        console.error(err);
        metaEl.textContent = "Failed to load cluster details.";
      });
  </script>
</body>
</html>
